<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [authentication][1]
-   [createToken][2]
    -   [Parameters][3]
-   [decodeToken][4]
    -   [Parameters][5]
-   [isLoggedIn][6]
    -   [Parameters][7]
-   [addTodoMutation][8]
-   [createSessionMutation][9]
-   [nodeDefinitions][10]
-   [nodeDefinitions][11]
-   [mutationType][12]
-   [TodoSchema][13]
-   [connectionDefinitions][14]
-   [todoType][15]
-   [viewerType][16]
-   [loadSessionData][17]
    -   [Parameters][18]
-   [sessionMiddleware][19]
-   [getSessionData][20]
    -   [Parameters][21]

## authentication

API to the JWT library jsonwebtoken

## createToken

Create a token to add to the session

### Parameters

-   `$0` **[Object][22]**  (optional, default `{}`)
    -   `$0.id`  
    -   `$0.role`  
-   `id` **[Number][23]** user primary key
-   `role` **[String][24]** user role

## decodeToken

Decode the session token to determine the userId and role.

### Parameters

-   `token` **[String][24]** encrypted user specific data

## isLoggedIn

Check if the current request has passed in a role

### Parameters

-   `role` **[String][24]** user role
    -   `role.role`  

## addTodoMutation

type AddTodoPayload {
  clientMutationId: string
  todo: Todo
}

## createSessionMutation

input SessionInput {
  username: String!,
  password: String!
}

type SessionPayload {
  clientMutationId: string
  username: String,
  token: String,
  list: TodoConnection
}

## nodeDefinitions

interface Node {
  id: ID!
}

type Query {
  getTodo(input: TodoInput): Todo
  node(id: ID!): Node
}

type Mutation {
  createSession(input: SessionInput): SessionPayload
  addTodo(input: AddTodoInput!): AddTodoPayload
  editTodo(input: AddTodoInput!): AddTodoPayload
  removeTodo(input: AddTodoInput!): AddTodoPayload
}

## nodeDefinitions

We get the node interface and field from the relay library.

The first method is the way we resolve an ID to its object. The second is the
way we resolve an object that implements node to its type.

## mutationType

This is the type that will be the root of our mutations, and the
entry point into performing writes in our schema.

## TodoSchema

Finally, we construct our schema (whose starting query type is the query
type we defined above) and export it.

## connectionDefinitions

type TosoConnection {
  edges: [TodoEdge]
  pageInfo: PageInfo!
}

type TodoEdge {
  cursor: String!
  node: Todo
}

## todoType

type Todo : Node {
  id: ID!
  text: String
  status: String
}

## viewerType

type viewer : Node {
  id: ID!
  name: String
  list: TodoConnection
}

## loadSessionData

decode token in the session

### Parameters

-   `req` **[Object][22]** HTTP request

## sessionMiddleware

-   **See: module:authentication**

Express middleware to convert the token from the session cookie to tokenData
and add it to the HTTP request.

## getSessionData

m
handles the case where there is no tokenData

### Parameters

-   `req` **[Object][22]** HTTP request
-   `res` **[Object][22]** HTTP response
-   `next` **[Function][25]** Function in middleware chain

[1]: #authentication

[2]: #createtoken

[3]: #parameters

[4]: #decodetoken

[5]: #parameters-1

[6]: #isloggedin

[7]: #parameters-2

[8]: #addtodomutation

[9]: #createsessionmutation

[10]: #nodedefinitions

[11]: #nodedefinitions-1

[12]: #mutationtype

[13]: #todoschema

[14]: #connectiondefinitions

[15]: #todotype

[16]: #viewertype

[17]: #loadsessiondata

[18]: #parameters-3

[19]: #sessionmiddleware

[20]: #getsessiondata

[21]: #parameters-4

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[23]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[24]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[25]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function
